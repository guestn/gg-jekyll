<!DOCTYPE html>
<html>
<meta charset="utf-8">
<head>
	<link href="assets/all.css" rel="stylesheet" type="text/css">

	<script src="//cdnjs.cloudflare.com/ajax/libs/snap.svg/0.3.0/snap.svg-min.js"></script>
</head>
<body>
	<header><img src="//www.guestandguest.com/images/gg_guestandguest-txt_logo.png"/>
		<svg viewBox="0 0 100 246" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.4" preserveAspectRatio="none">
			<path d="M0 0l16.3 85.2 15 43L48.8 246l18.4-24L100 0H0z" fill="rgba(0,0,0,0.02)"/>
			<path d="M0 0l16.2 50.2 14.6 38 18 82.2 18.6-17.6L100 0H0z" fill="#fff"/>
		</svg>

	</header>

	<canvas id="index-canvas" width="1000" height="800"></canvas>
	<img id="finger" src="https://openclipart.org/image/2400px/svg_to_png/203413/pointing-finger-right.png">
	<span>interesting line of text</span>



  	<div class="menu-container">
	  	<svg id="menu"></svg>

	  	<img id="menu-img" src="//static.pexels.com/photos/3182/dark-mountain.jpeg"/>

	  	<div class="menu-icon">
				<span class="stripe"></span>
				<span class="stripe"></span>
				<span class="stripe"></span>
			</div>
  	</div>

  	<div id="buttons">
		<button id="b-1">1</button>
		<button id="b-2"><</button>
  	</div>


<script src="js/geoJelly.js"></script>
<script>
geoJelly('rgba(255,255,255,0.5)', 'rgba(255,255,255,0.5)', '#index-canvas');
// function generateNoise(opacity) {
//    if ( !!!document.createElement('canvas').getContext ) {
//       return false;
//    }
//
//    var x, y,
//    number,
//    opacity = opacity || .2;
//
//    for ( x = 0; x < width; x++ ) {
//       for ( y = 0; y < height; y++ ) {
//          number = Math.floor( Math.random() * 50 );
//
//          context.fillStyle = "rgba(" + number + "," + number + "," + number + "," + opacity + ")";
//          context.fillRect(x, y, 1, 1);
//       }
//    }
//
//    //document.body.style.backgroundImage = "url(" + canvas.toDataURL("image/png") + ")";
// }
// generateNoise(0.4);

</script>

<script>
s6 = [1000, 0,    1000, 750,    0, 750,   0, 700,      0 ,510,   0, 410,   0, 0,   1000, 0]
s5 = [1000, 0,    1000, 750,    73, 750,  92,636,      20, 452,  0, 322,   0, 0,   1000, 0]
s4 = [1000, 0,    1000, 750,    309, 750,  233,527,    83, 265,  82, 263,  125, 0,  1000, 0]
s3 = [1000, 0,    1000, 750,   500, 750,  354, 588,   301, 263,  281, 220,   150,0,  1000, 0]
s2 = [1000, 52,   1000, 750,   659, 698,  500, 497,   569, 375,  635, 116,  700,50,  1000, 22]
s1 = [1000, 52,   1000, 750,   856, 544,  692, 497,   765, 252,  796, 122,  900, 100,  1000, 52]
//s0 = [1000, 52,   1000, 698,    976, 516, 957, 375,    973, 253, 985, 167, 990, 120,  1000, 52]
s0 = [1000, 300,   1000, 480,    976, 435,  957, 375,    970, 330, 980, 320,  990, 310,  1000, 300]


var s = Snap('#menu');
s.attr({preserveAspectRatio: 'none',viewBox:'0 0 1000 750'});
var poly = s.polygon(s0);
poly.attr({ /*fill:'url(#img1)'*/ fill: '#333'})

var type = mina.linear
var dur = 140

var frames = [
  { animation: { points: s0 }, dur: dur },
  { animation: { points: s1 }, dur: dur },
  { animation: { points: s2 }, dur: dur },
  { animation: { points: s3  }, dur: dur },
  { animation: { points: s4  }, dur: dur },
  { animation: { points: s5  }, dur: dur },
  { animation: { points: s6  }, dur: dur }
];


function nextFrame ( el, frameArr, n ) {

   if( n >= frameArr.length ) {
     activateMenuItems();
     menuInProgress();
     return;
   }
   el.animate( frameArr[n].animation, frameArr[n].dur, nextFrame.bind( null, el, frameArr, n + 1 ) );
}
function lastFrame ( el, frameArr, n ) {
   if( n < 0 ) { return }
   el.animate( frameArr[n].animation, frameArr[n].dur, lastFrame.bind( null, el, frameArr, n - 1 ));
}


var menuImg = document.getElementById('menu-img');


function menuInProgress() {
	 document.body.classList.toggle('animating');
}

function activateMenuItems() {
  	document.body.classList.toggle('activated');
}



document.querySelector('.menu-icon').addEventListener('click', function(){
	console.log('go')

  nextFrame(poly, frames, 0);
})

document.getElementById('b-2').addEventListener('click', function(){
	// menuImg.classList.toggle('activated');
	 lastFrame(poly, frames, 5);
	 activateMenuItems()
	 menuInProgress()
})
</script>


</body>
</html>
